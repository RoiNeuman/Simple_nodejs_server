{"version":3,"sources":["../../../src/app/server_modules/handle_static_content.js"],"names":["serverStaticContent","version","contentErrorPageHeaders","setHeaders","res","path","setHeader","indexOf","status","contentHeader","getContentType","folder","fileName","rs","createReadStream","__dirname","contentType","on","err","console","log","redirect","pipe","ext","extname","toLowerCase"],"mappings":";;;;;;kBAmBwBA,mB;;AAgBxB;;;;AACA;;;;;;AApCA;;AAEO,IAAMC,4BAAU,OAAhB;;AAGA,IAAIC,4DAA0B;AACpCC,aAAY,oBAASC,GAAT,EAAcC,IAAd,EAAoB;AAC/BD,MAAIE,SAAJ,CAAc,cAAd,EAA8B,WAA9B;AACA,MAAGD,QAAQA,KAAKE,OAAL,CAAa,UAAb,MAA6B,CAAC,CAAzC,EACAH,IAAII,MAAJ,CAAW,GAAX;AACA;AALmC,CAA9B;;AAQA,IAAIC,wCAAgB;AAC1BN,aAAY,oBAASC,GAAT,EAAcC,IAAd,EAAoB;AAC/BD,MAAIE,SAAJ,CAAc,cAAd,EAA8BI,eAAeL,IAAf,CAA9B;AACA;AAHyB,CAApB;;AAMQ,SAASL,mBAAT,CAA6BW,MAA7B,EAAqCC,QAArC,EAA+CR,GAA/C,EAAoD;AAClE,KAAMS,KAAK,aAAGC,gBAAH,CAAoBC,YAAY,YAAZ,GAA2BJ,MAA3B,GAAoCC,QAAxD,CAAX;AACA,KAAMI,cAAcN,eAAeE,QAAf,CAApB;;AAEAC,IAAGI,EAAH,CACC,OADD,EAEC,UAASC,GAAT,EAAc;AACbC,UAAQC,GAAR,CAAYF,GAAZ;AACAd,MAAIiB,QAAJ,CAAa,gCAAb;AACA,EALF;;AAQAjB,KAAIE,SAAJ,CAAc,cAAd,EAA8BU,WAA9B;AACAH,IAAGS,IAAH,CAAQlB,GAAR;AACA;;AAKD,SAASM,cAAT,CAAwBE,QAAxB,EAAkC;AACjC,KAAMW,MAAM,eAAKC,OAAL,CAAaZ,QAAb,EAAuBa,WAAvB,EAAZ;;AAEA,SAAQF,GAAR;AACA,OAAK,OAAL;AACC,UAAO,WAAP;AACD,OAAK,MAAL;AACC,UAAO,UAAP;AACD,OAAK,KAAL;AACC,UAAO,iBAAP;AACD,OAAK,MAAL;AACA,OAAK,OAAL;AACC,UAAO,YAAP;AACD,OAAK,MAAL;AACC,UAAO,WAAP;AACD,OAAK,MAAL;AACC,UAAO,WAAP;AACD;AACC,UAAO,YAAP;AAfD;AAiBA","file":"handle_static_content.js","sourcesContent":["/*jshint esversion: 6 */\n\nexport const version = \"0.1.0\";\n\n\nexport var contentErrorPageHeaders = {\n\tsetHeaders: function(res, path) {\n\t\tres.setHeader(\"Content-Type\", \"text/html\");\n\t\tif(path && path.indexOf('404.html') !== -1)\n\t\tres.status(404);\n\t}\n};\n\nexport var contentHeader = {\n\tsetHeaders: function(res, path) {\n\t\tres.setHeader(\"Content-Type\", getContentType(path));\n\t}\n};\n\nexport default function serverStaticContent(folder, fileName, res) {\n\tconst rs = fs.createReadStream(__dirname + '/../../../' + folder + fileName);\n\tconst contentType = getContentType(fileName);\n\n\trs.on(\n\t\t'error',\n\t\tfunction(err) {\n\t\t\tconsole.log(err);\n\t\t\tres.redirect('/content/pages/errors/404.html');\n\t\t}\n\t);\n\n\tres.setHeader(\"Content-Type\", contentType);\n\trs.pipe(res);\n};\n\nimport path from 'path'\nimport fs from 'fs'\n\nfunction getContentType(fileName) {\n\tconst ext = path.extname(fileName).toLowerCase();\n\n\tswitch (ext) {\n\tcase '.html':\n\t\treturn \"text/html\";\n\tcase '.css':\n\t\treturn \"text/css\";\n\tcase '.js':\n\t\treturn \"text/javascript\";\n\tcase '.jpg':\n\tcase '.jpeg':\n\t\treturn \"image/jpeg\";\n\tcase '.gif':\n\t\treturn \"image/gif\";\n\tcase '.png':\n\t\treturn \"image/png\";\n\tdefault:\n\t\treturn \"text/plain\";\n\t}\n}\n"]}